<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>vue</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>

    <style media="screen">

    table {
      background: white;
border-collapse: collapse;
    }
    td {
      padding:20px;
      box-sizing: border-box;
      text-align: center;
      border:2px solid;

    }

    #vue{
      margin:auto;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      position: relative;
      top:100px;
      }

      .historik{
        width:inherit;
        padding:20px;
        background: rgba(0,0,0,0.6);
        text-align:right;
      }
      input{
        width: 100%;
        padding: 10px;
        text-align: right;
        box-sizing:border-box;

      }

    </style>
    <script type="text/javascript">


    window.addEventListener("load", function(){


      let lastVal = 0;
      let arr = []
      let vue = new Vue({


          el : "#vue",
          data:{

            val: "",
            history: "",
            placeNum: "",
            value: 0,
            currentOp : "",
            bool: true,

          },
          methods:{

              number:function(nr){

                if(nr ===0 && this.val === ""){


                }else{
                    this.val += nr
                }

              },
              clear :function(){
                this.val = ""

              },

              calc: function(operator){

                this.currentOp = operator;

                if(this.val !== ""){

                    if(this.history === ""){
                      this.history = this.val + " " + operator;
                      arr.push(this.val)

                      arr.push(operator)

                    }else{
                      this.history += this.val +" "+ operator
                      arr.push(this.val)

                      arr.push(operator)

                    }
                    this.val = ""


                }


                if(operator === "="){


                        this.history =""

                        for(let i=0; i<arr.length;i++){

                          if(arr[i] !== "+" && arr[i] !== "=" && arr[i] !== "-"){

                            arr[i] = Number(arr[i])
                          }
                        }

                        let minusOrPlus = "+"
                        for(let i=0; i< arr.length; i++){

                          if(arr[i] !== "+" && arr[i] !== "=" && arr[i] !== "-"){



                            if(arr[i+1] ==="+" || arr[i+1] === "="){

                              console.log(arr[i+1])



                              this.value = this.value + arr[i];

                            }else if(arr[i+1] === "-" ){

                              console.log("hej")

                              if(arr[i]>arr[i+2]){
                                this.value = this.value - arr[i];

                                minusOrPlus = "+"
                              }else{
                                this.value = this.value - arr[i];

                                minusOrPlus = "-"
                              }


                            }


                            console.log(arr)
                          }



                        }

                          if(minusOrPlus === "+"){
                            console.log(this.value)
                              this.value = this.value * -1

                          }else if(minusOrPlus === "-"){
                            this.value = "-" + this.value
                          }

                          this.val = this.value

                          this.value = 0
                          arr = []

                }


              }

          }

      })



    })

    </script>
  </head>
  <body>

  <!--  Kriterier för godkänt: Appen ska innehålla
input-fält för att mata in ett tal
presentation av resultatet hittills
knappar för vanliga räknesätt (+, -, *, /)
knapp för att rensa resultatet och återställa resultatet till noll (C, Clear eller motsvarande)
knapp för att räkna ut ett resultat (=)
appen ska ha en tydlig design (förklara för användaren hur man förväntas använda den, användaren ska inte behöva gissa vad en knapp gör)
appen ska versionshanteras med Git och vara publicerad på GitHub

Kriterier för väl godkänt:
knappar för operationerna x2 och √ (roten ur)
knappen för roten ur ska bara vara synlig när resultatet är ett positivt tal
appen håller en historik över tidigare uträkningar
varje gång man klickar på = ska det uträknade resultatet sparas i en lista, som också ska vara synlig för användaren-->

    <div id="vue">

      <div class="content">
        <div class="historik">

            {{history}}
        </div>
        <input type="text" name="" v-bind:placeholder="placeNum" v-bind:value="val" >

        <table>
          <tr>
            <td v-on:click="clear">C</td>
            <td  v-on:click="calc('√')">√</td>
            <td  v-on:click="calc('x2')">x2</td>
            <td  v-on:click="calc('/')">/</td>
          </tr>
          <tr>
            <td v-on:click="number(7)">7</td>
            <td v-on:click="number(8)">8</td>
            <td v-on:click="number(9)">9</td>
            <td  v-on:click="calc('x')">x</td>
          </tr>
          <tr>
            <td v-on:click="number(4)">4</td>
            <td v-on:click="number(5)">5</td>
            <td v-on:click="number(6)">6</td>
            <td  v-on:click="calc('-')">-</td>

          </tr>
          <tr>
            <td  v-on:click="number(1)">1</td>
            <td v-on:click="number(2)">2</td>
            <td v-on:click="number(3)">3</td>
            <td v-on:click="calc('+')">+</td>

          </tr>
          <tr>
            <td></td>
            <td v-on:click="number(0)" >0</td>
            <td colspan="2" v-on:click="calc('=')" >=</td>
          </tr>
        </table>
      </div>

    </div>




  </body>
</html>
