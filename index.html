<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>vue</title>
    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.16/dist/vue.js"></script>

    <style media="screen">

    body{
      height: 100vh;
      background: -moz-radial-gradient(center, ellipse cover, rgba(76,29,36,0.54) 0%, rgba(76,29,36,0.67) 22%, rgba(76,29,36,0.69) 26%, rgba(76,29,36,1) 100%);
background: -webkit-radial-gradient(center, ellipse cover, rgba(76,29,36,0.54) 0%,rgba(76,29,36,0.67) 22%,rgba(76,29,36,0.69) 26%,rgba(76,29,36,1) 100%);
background: radial-gradient(ellipse at center, rgba(76,29,36,0.54) 0%,rgba(76,29,36,0.67) 22%,rgba(76,29,36,0.69) 26%,rgba(76,29,36,1) 100%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#8a4c1d24', endColorstr='#4c1d24',GradientType=1 );
  font-family: arial;
  color:rgba(255,255,255,0.7)
    }
    table {
      color:rgba(255,255,255,0.7);
      background:#333644;

border-collapse: collapse;
    }
    td {
      padding:20px;
      box-sizing: border-box;
      text-align: center;

    }

    .col{
      color:rgba(0,0,0,0.5);
      display: inline-block;
      padding-top:10px;
    }

    #vue{
      margin:auto;
      display: flex;
      justify-content: center;
      align-items: center;
      flex-direction: column;
      position: relative;
      top:100px;
      }

      .historik{
        width:inherit;
        padding:10px;
        background: rgba(0,0,0,0.3);
        text-align:right;
        margin-top: 50px;
        border-bottom: 3px solid rgba(255,255,255,0.8)
      }
      input{
        width: 100%;
        padding:10px;
        text-align: right;
        box-sizing:border-box;
        border:none;
        border-bottom:3px solid rgba(255,255,255,0.8);
        margin-bottom: 3px;
        background: rgba(255,255,255,0)
      }

      .svar{
        text-align: center;
        display: block;
        width:100%;
        color:rgba(255,255,255,0.5);
        margin-bottom:20px;
      }
      .resultat{
        color:rgba(255,255,255,0.5);

        display: block;
        text-align: center;
        width:100%;

      }

    </style>
    <script type="text/javascript">

    /*arr.push(Number(this.val));*/




/*
      if(operator === "+" && bool){

        //lagrar förra värdet i prevVal när jag trycker på en operator
        if(helaValue === ""){
          prevVal = this.val;
          this.history = this.val + ""

        }else {
          this.history = Number(helaValue) +  Number(this.val) + ""
          prevVal = Number(helaValue) +  Number(this.val)
          helaValue = ""

        }
        bool = false;

      }else if(operator ==="+") {

        helaValue = Number(prevVal) + Number(this.val)

        prevVal = helaValue;
        this.history = helaValue + ""


        bool = true;


      }



        this.val = ""
        */






    /*arr.push(operator);
    if(arr.length === 4){

      helaValue = arr[0] + arr[2]
      this.history += " " + helaValue
      bool = true;
      this.val =  helaValue
      arr = []


    }
    if(helaValue !== ""){

      prevVal = helaValue
    }
                      console.log(arr)
    console.log(prevVal)*/


    window.addEventListener("load", function(){
      let svar = true;
      let res = []
      let x2 = false;
      let bool = true;
        let talet = ""
      let arr = []
      let vue = new Vue({


          el : "#vue",
          data:{

            val: "",
            history: "",
            placeNum: "",
            value: 0,
            result: "",
            svar: "",
            ekvation: ""
          },
          methods:{

              number:function(nr){


                  this.val += nr
                  this.history += nr

              },
              clear :function(){
                this.val = ""
                this.history = "";
                arr = []
                talet = ""
                this.placeNum = ""
              },

              calc: function(operator){

                    /*this.placeNum += operator*/
                    if(talet === ""){

                      if(this.val === ""){

                        if(operator !== "="){
                          arr.push(operator)

                        }
                        console.log("lol")
                        console.log(arr)

                      }else{

                        arr.push(Number(this.val))
                        arr.push(operator)

                      }


                    }else{

                      if(this.val !== ""){

                        arr.push(Number(this.val))
                        arr.push(operator)

                      }else{
                        console.log(operator)
                        if(operator !== "="){


                            arr.push(operator)


                        }else if(arr[1]=== "x2"){
                          console.log(arr)
                          this.svar += arr[0] + ", "
                          this.history = ""
                          arr =[]
                        }

                      }

                    }



                      for(let i=0; i<arr.length; i++){


                          console.log(arr)

                          if(arr[1]=== "="){
                            if(svar){
                              res.push(arr[0])
                              this.svar += arr[0] +", "
                              console.log(arr)
                              arr = []
                              svar = false;
                            }

                          }
                        if(typeof arr[2] === "string"){
                          console.log(arr)

                          arr[1] = arr[2]
                          arr.pop()
                        }


                        this.history = ""
                          for(let x=0; x< arr.length;x++){
                            this.history += arr[x]
                            this.placeNum = arr[x]

                          }

                          if(typeof arr[0]=== "number" && arr[0] !== 0){

                            if( arr[1] === "+"){

                                if(typeof arr[2] === "number"){

                                    let string1 = arr[0].toString();
                                    let string2 = arr[2].toString();
                                    let tot = arr[0] + arr[2]

                                    if(arr[3] === "="){

                                      console.log("ja")
                                      arr = []
                                      this.result = string1 +"+"+ string2 + "=" +" " + tot ;
                                      this.ekvation +=  string1 +"+"+ string2 + "=" +" " + tot + ","
                                      this.history = ""
                                      this.placeNum = tot
                                      this.svar += tot + ", "
                                      res.push(tot)
                                      console.log(arr)

                                      console.log(res)
                                    }else {
                                      this.result = string1 +"+"+ string2 + "=" +" " + tot ;
                                      this.ekvation +=  string1 +"+"+ string2 + "=" +" " + tot + ", "

                                      this.history =" "
                                      this.placeNum = tot + " " + operator
                                        talet = arr[0] + arr[2];
                                        arr = []
                                        arr.push(talet)
                                        arr.push(operator)
                                    }
                                }

                            }else if( arr[1]=== "-"){
                              console.log(arr)

                              if(typeof arr[2] === "number"){

                                let string1 = arr[0].toString();
                                let string2 = arr[2].toString();
                                let tot = arr[0] - arr[2]

                                  if(arr[3] === "="){
                                    arr = []
                                    this.result =  string1 +"-"+ string2 + "=" +" " + tot ;
                                    this.ekvation += string1 +"-"+ string2 + "=" +" " + tot +", ";
                                    this.history =  ""
                                    this.svar += tot + ", "

                                    this.placeNum = tot

                                  }else{
                                    this.result =  string1 +"-"+ string2 + "=" +" " + tot ;
                                    this.ekvation += string1 +"-"+ string2 + "=" +" " + tot + ", " ;

                                    this.history = ""
                                    this.placeNum = tot + " " +operator
                                    talet = arr[0] - arr[2];
                                    arr = []

                                    arr.push(talet)
                                    arr.push(operator)
                                  }

                              }
                            }else if(arr[1] === "x"){
                              if(typeof arr[2] === "number"){

                                let string1 = arr[0].toString();
                                let string2 = arr[2].toString();
                                let tot = arr[0] * arr[2]

                                if(arr[3] === "="){
                                  arr = []
                                  this.result = string1 +"*"+ string2 + "=" +" " + tot ;
                                  this.ekvation += string1 +"*"+ string2 + "=" +" " + tot + ", ";

                                  this.history =  "";
                                  this.svar += tot + ", "

                                  this.placeNum = tot
                                }else{
                                  console.log("här")
                                  this.result = string1 +"*"+ string2 + "=" +" " + tot ;
                                  this.ekvation += string1 +"*"+ string2 + "=" +" " + tot + ", ";

                                  this.history =  "";
                                  this.placeNum = tot + " " +operator
                                  talet = arr[0] * arr[2];
                                  arr = []

                                  arr.push(talet)
                                  arr.push(operator)
                                }
                              }
                            }else if(arr[1] === "/"){
                              if(typeof arr[2] === "number"){

                                let string1 = arr[0].toString();
                                let string2 = arr[2].toString();
                                let tot = arr[0] / arr[2]

                                if(arr[3] === "="){
                                  arr = []
                                  this.result = string1 +"/"+ string2 + "=" +" " + tot ;
                                  this.ekvation += string1 +"/"+ string2 + "=" +" " + tot + ", ";

                                  this.history =  "";
                                  this.svar += tot + ", "

                                  this.placeNum = tot
                                }else{

                                  this.result = string1 +"/"+ string2 + "=" +" " + tot ;
                                  this.ekvation += string1 +"/"+ string2 + "=" +" " + tot + ", ";

                                  this.history =  "";
                                  this.placeNum = tot + " " +operator
                                  talet = arr[0] / arr[2];
                                  arr = []

                                  arr.push(talet)
                                  arr.push(operator)
                                }
                              }

                            }else if(arr[1] === "="){



                            }else if(arr[1] === "x2"){



                              let tot = arr[0] * arr[0];
                              talet = arr[0] * arr[0];
                                if(arr[2]=== "="){

                                  console.log(arr)
                                  this.result =  arr[0].toString() + "^2 = " + (arr[0] * arr[0])
                                  this.history = tot
                                  this.ekvation +=  arr[0].toString() + "^2 = " + (arr[0] * arr[0]) + ", "
                                  this.svar += tot + ", "

                                }else{
                                  this.result =  arr[0].toString() + "^2 = " + (arr[0] * arr[0])
                                  this.history = tot;
                                  this.ekvation +=  arr[0].toString() + "^2 = " + (arr[0] * arr[0]) + ", "
                                }


                              arr =[]

                                this.val = talet


                                x2= true;



                            }else if(arr[1] === "√"){

                              this.history = Math.sqrt(arr[0])
                              this.placeNum = Math.sqrt(arr[0])
                              talet = Math.sqrt(arr[0])

                              arr = []

                            }

                          }else if( arr[0] === "="){
                            console.log("la")
                            this.history = ""
                          }

                      }

                      if(x2){
                        arr.push(talet)
                        arr.push(operator)
                        x2= false
                      }

                      svar = true

                      this.val = ""
                      console.log(res)

              }


          }

      })

    })




    </script>
  </head>
  <body>

  <!--  Kriterier för godkänt: Appen ska innehålla
input-fält för att mata in ett tal
presentation av resultatet hittills
knappar för vanliga räknesätt (+, -, *, /)
knapp för att rensa resultatet och återställa resultatet till noll (C, Clear eller motsvarande)
knapp för att räkna ut ett resultat (=)
appen ska ha en tydlig design (förklara för användaren hur man förväntas använda den, användaren ska inte behöva gissa vad en knapp gör)
appen ska versionshanteras med Git och vara publicerad på GitHub

Kriterier för väl godkänt:
knappar för operationerna x2 och √ (roten ur)
knappen för roten ur ska bara vara synlig när resultatet är ett positivt tal
appen håller en historik över tidigare uträkningar
varje gång man klickar på = ska det uträknade resultatet sparas i en lista, som också ska vara synlig för användaren-->

    <div id="vue">
      <div class="svar">

        <span>Results</span></br>  <span class="col">{{svar}}<span>
      </div>
      <div class="resultat">
        <span>Latest ekvation</span> </br> <span class="col">{{result}}</span>
      </div>
      <div class="content">



        <div class="historik">

            {{history}}
        </div>
        <input type="text" name="" v-bind:placeholder="placeNum"  v-model:value="val" >

        <table>
          <tr>
            <td v-on:click="clear">C</td>
            <td  v-on:click="calc('√')">√</td>
            <td  v-on:click="calc('x2')">x2</td>
            <td  v-on:click="calc('/')">/</td>
          </tr>
          <tr>
            <td v-on:click="number(7)">7</td>
            <td v-on:click="number(8)">8</td>
            <td v-on:click="number(9)">9</td>
            <td  v-on:click="calc('x')">x</td>
          </tr>
          <tr>
            <td v-on:click="number(4)">4</td>
            <td v-on:click="number(5)">5</td>
            <td v-on:click="number(6)">6</td>
            <td  v-on:click="calc('-')">-</td>

          </tr>
          <tr>
            <td  v-on:click="number(1)">1</td>
            <td v-on:click="number(2)">2</td>
            <td v-on:click="number(3)">3</td>
            <td v-on:click="calc('+')">+</td>

          </tr>
          <tr>
            <td></td>
            <td v-on:click="number(0)" >0</td>
            <td colspan="2" v-on:click="calc('=')" >=</td>
          </tr>
        </table>
      </div>
      <div class="count">
        <h2>History of your ekvations</h2>
        {{ekvation}}
      </div>

    </div>




  </body>
</html>
